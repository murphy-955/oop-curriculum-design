@startuml
title 数据流向图 - 读写分离与缓存策略

package "写入层" {
  [事件摄取服务] --> [Kafka消息队列]
  [Kafka消息队列] --> [事件处理服务]
  [事件处理服务] --> [Redis主缓存]
  [事件处理服务] --> [MySQL主库]
}

package "读取层" {
  [可视化服务] --> [Redis从缓存]
  [球员统计服务] --> [Redis从缓存]
  [比赛状态服务] --> [Redis从缓存]
}

package "实时推送层" {
  [WebSocket服务] --> [Kafka消息队列]
  [Kafka消息队列] --> [用户客户端]
}

[MySQL主库] --> [MySQL从库] : 主从复制
[Redis主缓存] --> [Redis从缓存] : 集群同步

[Redis从缓存] --> [可视化服务] : 缓存命中
[Redis从缓存] --> [MySQL从库] : 缓存未命中

@enduml