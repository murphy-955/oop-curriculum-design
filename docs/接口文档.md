# 接口文档

## 主持人新建一个比赛
> /api/create
> 
> 请求方式：POST
> 
> 请求参数：
```json
{
  "title": "比赛标题",
  "description": "比赛描述",
  "start_time": "2021-01-01 00:00:00",
  "master": {
    "name": "主队名称",
    "logo": "主队logo url",
    "members": [
      {
        "name": "队员1",
        "position": "队员1职位"
      }
    ]
  },
  "guest": {
    "name": "客队名称",
    "logo": "客队logo",
    "members": [
      {
        "name": "队员1",
        "position": "队员1职位"
      }
    ]
  }
}
```
> 返回
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "token": "xxxxx"
  }
}
```



## 主持人同步比赛信息
> /api/sync
> 
> 请求方式：POST
> 
> 请求参数：
```json5
{
  "token": "xxxxx",
  "team": "master|guest",
  //who do something and get the score at the {time}
  "members": [
    "戴维斯",
    "格贝尔"
  ],
  "action": "跳球|盖帽|传球|得分|失误",
  "score": 0,
  "time": "00:00:00"
}
```

## 用户查询比赛列表
> /api/list
> 
> 请求方式：GET
> 
> 请求参数：无
> 
> 返回
```json
{
  "code": 0,
  "message": "success",
  "data": [
    {
      "name": "比赛1",
      "uuid": "uuid of game 1"
    }
  ]
}
```

## 用户观看比赛
> /api/view
> 
> 请求方式：GET
> 
> 请求参数：
```json
{
  "uuid": "uuid of game 1"
}
```
> 返回流式信息，每一行个json
```python
{
  "team": "init",
  "members": [
    "队伍master|logo_url",
    "队伍客队|logo_url"
    ],
  "action": "跳球|盖帽|传球|得分|失误",
  "score": 0,
  "time": "00:00:00"
}
{
  "team": "master|guest",
  //who do something and get the score at the {time}
  "members": [
    "戴维斯",
    "格贝尔"
  ],
  "action": "跳球|盖帽|传球|得分|失误",
  "score": 0,
  "time": "00:00:00"
}
```